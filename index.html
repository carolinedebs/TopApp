<!--
	Keeping Up Application Template by Caroline Debs (contact me at cdebs@stanford.edu)
	This application allows you to keep up with the most popular news.
	It takes the top entry in RSS feeds and posts it in a highly readable format.
-->

<html>
	<head>


		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
		<meta name="description" content="This application allows you to keep up with the most popular news.">
		<meta name="author" content="Caroline Debs">

		<!-- App name that appears on the web browser -->
		<title>Keeping Up</title>

		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

		<!-- Google Fonts (you can import more at https://www.google.com/fonts) -->
		<link href="http://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet" type="text/css">

		<!-- Optional Bootstrap theme -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
		<script src="https://code.jquery.com/jquery-2.1.4.js"></script>

		<!-- Latest compiled and minified JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
		<script src="app.js"></script>

				<!-- Import Omlet -->
		<script type="text/javascript" src="https://omlet.me/a/lib/base64.js"></script>
		<script type="text/javascript" src="https://omlet.me/a/js/yeouiju.js"></script>
		<script type="text/javascript" src="https://omlet.me/a/js/omlet.js"></script>

	</head>

	<!--DESIGNING THE UI
		Now here is the fun part, especially for artists! Design the user interface (UI) of Keeping Up!
		A really helpful tool is Bootstrap, which allows you to use cool graphics to make your app look professional and legit :) The URL for Bootstrap is: http://getbootstrap.com/getting-started/
	-->
	<body>
		<!-- BEGIN NAVIGATION BAR --> 
		<nav role="navigation" class="navbar navbar-default">
			
	    	<!-- Brand and toggle get grouped for better mobile display -->
	    	<div class="navbar-header">
<!-- 	        <button type="button" data-target="#navbarCollapse" data-toggle="collapse" class="navbar-toggle">
	            <span class="sr-only">Toggle navigation</span>
	            <span class="icon-bar"></span>
	            <span class="icon-bar"></span>
	            <span class="icon-bar"></span>
	        </button> -->
			
	        <span class="navbar-brand" style="font-family:Pacifico;font-size:18px;margin-top:-5px"><img src="./media/toplogo.png"></img></span>
	        <span class="navbar-brand" style="font-family:Pacifico;font-size:18px;margin-left:-25px;color:black"></span>


	    	</div>
	    	<!-- Collection of nav links and other content for toggling -->
	    	<div id="navbarCollapse" class="collapse navbar-collapse">
	        	<ul class="nav navbar-nav">
	            	<!--<li><a href="./survey">Survey</a></li>-->
	        	</ul>
			    <ul class="nav navbar-nav navbar-right">

			        <!--<li><a href="#"></a></li>-->
			    </ul>
	    	</div>
		</nav>
		<!-- END NAVIGATION BAR --> 

		<!-- BEGIN ADDING FEED CONTENT --> 
		<ul class="alert alert-info" style="margin-top:-20px">
			<!-- <div style="font-family: Pacifico; font-size:20px"><b></b></div> -->
			<img id="div0" src="./media/share.png" style="float:right;margin-top:-5px"></img>
			<img src="./media/People.ico" style="padding-right:10px"><span id="feed1" ></img></span>
		</ul>

		<div class="alert alert-info" style="margin-top:-20px">
			<!-- <div style="font-family: Courier New; font-size:20px"><b>ESPN NBA</b></div> -->
			<img id="div1" src="./media/share.png" style="float:right;margin-top:-5px"></img>
			<img src="./media/ESPN.ico" style="padding-right:10px"><span id="feed2"></img></span>
		</div>

		<!-- <div id="div3" class="alert alert-success">
			<div style="font-family: Cambria; font-size:20px"><b>Search CNN for "election"</b></div>
			<div id="content"></div>
		</div> -->

		<div class="alert alert-info" style="margin-top:-20px">
			<!-- <div style="font-family: Times New Roman; font-size:20px"><b>Daily Beast</b></div> -->
			<img id="div2" src="./media/share.png" style="float:right;margin-top:-5px"></img>
			<img src="./media/DailyBeast.png" style="padding-right:10px"><span id="feed3"></img></span>
		</div>

		<div class="alert alert-info" style="margin-top:-20px">
			<!-- <div style="font-family: Times New Roman; font-size:20px"><b>Daily Beast</b></div> -->
			<img id="div3" src="./media/share.png" style="float:right;margin-top:-5px"></img>
			<img src="./media/NYTimes.ico" style="padding-right:10px"><span id="feed4"></img></span>
		</div>

		<div class="alert alert-info" style="margin-top:-20px">
			<!-- <div style="font-family: Times New Roman; font-size:20px"><b>Daily Beast</b></div> -->
			<img id="div4" src="./media/share.png" style="float:right;margin-top:-5px"></img>
			<img src="./media/NYTimes.ico" style="padding-right:10px"><span id="feed5"></img></span>
		</div>

		<div class="alert alert-info" style="margin-top:-20px">
			<!-- <div style="font-family: Times New Roman; font-size:20px"><b>Daily Beast</b></div> -->
			<img id="div5" src="./media/share.png" style="float:right;margin-top:-5px"></img>
			<img src="./media/CNN.png" style="padding-right:10px"><span id="feed6"></img></span>
		</div>


		<!-- END ADDING FEED CONTENT --> 


			<!-- BEGIN LOADING RSS FEEDS
		 This example loads People Magazine and ESPN NBA news RSS Feeds using this Javascript code below. 
		 Documentation for Google Feeds is located at this URL: https://developers.google.com/feed/v1/devguide
	-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

    	var feed_entries = [];

	    google.load("feeds", "1");
	    function initialize() {
	    	/* The first feed is called "feed1" and in this example, it refers to the People Magazine RSS feed */
			var feed1 = new google.feeds.Feed("http://feeds.people.com/people/headlines");
			/* With the .setNumEntries(num) command, you can specify how many headlines you would like to load */
			feed1.setNumEntries(1); 
			feed1.load(function(result) {
				if (!result.error) {
				/* Use the for loop if you wish to print out multiple headlines from the source "feed1" */
				for (var i = 0; i < result.feed.entries.length; i++) { 
					var container = document.getElementById("feed1");
					var entry = result.feed.entries[i];
					feed_entries[0] = entry;

					var a = document.createElement('a');
					var linkText = document.createTextNode(entry.title);
					a.appendChild(linkText);
					a.title =  entry.title ;
					console.log(a.title);
					a.href = entry.link;
					container.appendChild(a);
				}
	        }
	      });
			/* The second feed is called "feed2" and in this example, it refers to the ESPN NBA news feed */
			var feed2 = new google.feeds.Feed("http://sports.espn.go.com/espn/rss/news");
			feed2.load(function(result) {
			if (!result.error) {
				//for (var i = 0; i < result.feed.entries.length; i++) {
					var container = document.getElementById("feed2");
					var entry = result.feed.entries[0];
					console.log(entry);
					feed_entries[1] = entry;
					var a = document.createElement('a');
					var linkText = document.createTextNode(entry.title);
					a.appendChild(linkText);
					a.title = entry.title;
					a.href = entry.link;
					container.appendChild(a);
				//}
			}
			
		});
			/* The third feed is called "feed3" and in this example, it refers to the Daily Beast news feed */
			var feed3 = new google.feeds.Feed("http://feeds.feedburner.com/thedailybeast/articles");
			feed3.load(function(result) {
			if (!result.error) {
				//for (var i = 0; i < result.feed.entries.length; i++) {
					var container = document.getElementById("feed3");
					var entry = result.feed.entries[0]; // Get the first entry
					feed_entries[2] = entry;
					var a = document.createElement('a'); // Create a new link tag for HTML
					var linkText = document.createTextNode(entry.title); 
					a.appendChild(linkText);
					a.title = entry.title;
					a.href = entry.link;
					container.appendChild(a);
				//}
			}
		});
			/* The third feed is called "feed3" and in this example, it refers to the Daily Beast news feed */
			var feed4 = new google.feeds.Feed("http://rss.nytimes.com/services/xml/rss/nyt/US.xml");
			feed4.load(function(result) {
			if (!result.error) {
				//for (var i = 0; i < result.feed.entries.length; i++) {
					var container = document.getElementById("feed4");
					var entry = result.feed.entries[0]; // Get the first entry
					feed_entries[3] = entry;
					console.log(entry);
					var a = document.createElement('a'); // Create a new link tag for HTML
					var linkText = document.createTextNode(entry.title); 
					a.appendChild(linkText);
					a.title = entry.title;
					a.href = entry.link;
					container.appendChild(a);
				//}
			}
		});
			var feed5 = new google.feeds.Feed("http://rss.nytimes.com/services/xml/rss/nyt/World.xml");
			feed5.load(function(result) {
			if (!result.error) {
				//for (var i = 0; i < result.feed.entries.length; i++) {
					var container = document.getElementById("feed5");
					var entry = result.feed.entries[0]; // Get the first entry
					feed_entries[4] = entry;
					console.log(entry);
					var a = document.createElement('a'); // Create a new link tag for HTML
					var linkText = document.createTextNode(entry.title); 
					a.appendChild(linkText);
					a.title = entry.title;
					a.href = entry.link;
					container.appendChild(a);
				//}
			}
		});
		var feed6 = new google.feeds.Feed("http://rss.cnn.com/rss/cnn_topstories.rss");
			feed6.load(function(result) {
			if (!result.error) {
				//for (var i = 0; i < result.feed.entries.length; i++) {
					var container = document.getElementById("feed6");
					var entry = result.feed.entries[0]; // Get the first entry
					feed_entries[5] = entry;
					console.log(entry);
					var a = document.createElement('a'); // Create a new link tag for HTML
					var linkText = document.createTextNode(entry.title); 
					a.appendChild(linkText);
					a.title = entry.title;
					a.href = entry.link;
					container.appendChild(a);
				//}
			}
		});
			/* Create more functions to load more feeds here! */
		}
		google.setOnLoadCallback(initialize);

// /****** ADDING A TOP SEARCH FROM A WEBPAGE ******/
// 	    google.load("feeds", "1");

// 		function OnLoad() {
// 		  // Query for president feeds on cnn.com
// 		  var query = 'site:cnn.com election';
// 		  google.feeds.findFeeds(query, findDone);
// 		}

// 		function findDone(result) {
// 		  // Make sure we didn't get an error.
// 		  if (!result.error) {
// 		    // Get content div
// 		    var content = document.getElementById('content');
// 		    var html = '';

// 		    // Loop through the results and print out the title of the feed and link to
// 		    // the url.
// 		    //for (var i = 0; i < result.entries.length; i++) {
// 		      var entry = result.entries[0];
// 		      console.log(entry);
// 		      feed_entries[3] = entry;
// 		      html += '<p><a href="/feed/v1/' + entry.url + '">' + entry.title + '</a></p>';
// 		    //}
// 		    content.innerHTML = html;
// 		  }
// 		}

// 		google.setOnLoadCallback(OnLoad);

		function shareOmlet(entry) {
			var text = entry.title;
	        var rdl = Omlet.createRDL({
	            noun: "news article",
	            displayTitle: text,
	            displayText: String(entry.contentSnippet),       
	            json: {},
	            callback: encodeURI(window.location.href)
	        });
		    Omlet.setPasteboard(rdl);
		    Omlet.exit();
		}

		document.getElementById("div0").addEventListener("click", function() {
			shareOmlet(feed_entries[0])
		});
		document.getElementById("div1").addEventListener("click", function() {
			shareOmlet(feed_entries[1])
		});
		document.getElementById("div2").addEventListener("click", function() {
			shareOmlet(feed_entries[2])
		});
		document.getElementById("div3").addEventListener("click", function() {
			shareOmlet(feed_entries[3])
		});

		document.getElementById("div4").addEventListener("click", function() {
			shareOmlet(feed_entries[4])
		});

		document.getElementById("div5").addEventListener("click", function() {
			shareOmlet(feed_entries[5])
		});

		//$("#feed2").onClick(toOmlet(feed_entries[1]));
		//$("#feed3").onClick(toOmlet(feed_entries[2]));
		//$("#content").onClick(toOmlet(feed_entries[3]));

	</script>
	<!-- END LOADING RSS FEEDS -->
	</body>
</html>